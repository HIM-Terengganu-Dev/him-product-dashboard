"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/contacts/summary";
exports.ids = ["pages/api/contacts/summary"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts%2Fsummary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts%5Csummary.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts%2Fsummary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts%5Csummary.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_contacts_summary_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\contacts\\summary.ts */ \"(api)/./pages/api/contacts/summary.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_contacts_summary_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_contacts_summary_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/contacts/summary\",\n        pathname: \"/api/contacts/summary\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_contacts_summary_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNvbnRhY3RzJTJGc3VtbWFyeSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDY29udGFjdHMlNUNzdW1tYXJ5LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQytEO0FBQy9EO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywyREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMkRBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGltLXdlbGxuZXNzLWRhc2hib2FyZC8/NzNjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGNvbnRhY3RzXFxcXHN1bW1hcnkudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jb250YWN0cy9zdW1tYXJ5XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29udGFjdHMvc3VtbWFyeVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts%2Fsummary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts%5Csummary.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/contacts/summary.ts":
/*!***************************************!*\
  !*** ./pages/api/contacts/summary.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    connectionString: process.env.POSTGRES_URL,\n    ssl: {\n        rejectUnauthorized: false\n    }\n});\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        res.setHeader(\"Allow\", [\n            \"GET\"\n        ]);\n        return res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n    const { name, type, marketplace, product, startDate, endDate } = req.query;\n    const whereClauses = [];\n    const queryParams = [];\n    let paramIndex = 1;\n    if (name && typeof name === \"string\") {\n        whereClauses.push(`name ILIKE $${paramIndex++}`);\n        queryParams.push(`%${name}%`);\n    }\n    if (type && typeof type === \"string\") {\n        const typeArray = type.split(\",\");\n        if (typeArray.length > 0) {\n            whereClauses.push(`type ILIKE ANY($${paramIndex++}::text[])`);\n            queryParams.push(typeArray);\n        }\n    }\n    if (marketplace && typeof marketplace === \"string\") {\n        let marketplaceArray = marketplace.split(\",\");\n        const hasNone = marketplaceArray.includes(\"_NONE_\");\n        marketplaceArray = marketplaceArray.filter((m)=>m !== \"_NONE_\");\n        const conditions = [];\n        if (hasNone) {\n            conditions.push(`(last_marketplace IS NULL OR TRIM(last_marketplace) = '')`);\n        }\n        if (marketplaceArray.length > 0) {\n            conditions.push(`last_marketplace = ANY($${paramIndex++}::text[])`);\n            queryParams.push(marketplaceArray);\n        }\n        if (conditions.length > 0) {\n            whereClauses.push(`(${conditions.join(\" OR \")})`);\n        }\n    }\n    if (product && typeof product === \"string\") {\n        let productArray = product.split(\",\");\n        const hasNone = productArray.includes(\"_NONE_\");\n        productArray = productArray.filter((p)=>p !== \"_NONE_\");\n        const conditions = [];\n        if (hasNone) {\n            conditions.push(`(last_order_product IS NULL OR TRIM(last_order_product) = '')`);\n        }\n        if (productArray.length > 0) {\n            conditions.push(`last_order_product = ANY($${paramIndex++}::text[])`);\n            queryParams.push(productArray);\n        }\n        if (conditions.length > 0) {\n            whereClauses.push(`(${conditions.join(\" OR \")})`);\n        }\n    }\n    if (startDate && typeof startDate === \"string\") {\n        whereClauses.push(`last_order_date >= $${paramIndex++}`);\n        queryParams.push(startDate);\n    }\n    if (endDate && typeof endDate === \"string\") {\n        whereClauses.push(`last_order_date <= $${paramIndex++}`);\n        queryParams.push(endDate);\n    }\n    const whereString = whereClauses.length > 0 ? `WHERE ${whereClauses.join(\" AND \")}` : \"\";\n    try {\n        const client = await pool.connect();\n        try {\n            const baseTable = \"mart_himdashboard.crm_main_table\";\n            // Queries for filtered data\n            const typeSummaryPromise = client.query(`SELECT type, COUNT(*) as count FROM ${baseTable} ${whereString} GROUP BY type`, queryParams);\n            const marketplaceWhereClause = `${whereString ? `${whereString} AND` : \"WHERE\"} last_marketplace IS NOT NULL AND TRIM(last_marketplace) <> ''`;\n            const marketplaceSummaryPromise = client.query(`SELECT TRIM(last_marketplace) as marketplace, COUNT(*) as count \r\n         FROM ${baseTable} \r\n         ${marketplaceWhereClause}\r\n         GROUP BY TRIM(last_marketplace) \r\n         ORDER BY count DESC`, queryParams);\n            const totalContactsPromise = client.query(`SELECT COUNT(*) as count FROM ${baseTable} ${whereString}`, queryParams);\n            // Queries for unfiltered dropdown options\n            const allMarketplacesPromise = client.query(`SELECT DISTINCT TRIM(last_marketplace) as marketplace FROM ${baseTable} \r\n         WHERE last_marketplace IS NOT NULL AND TRIM(last_marketplace) <> '' \r\n         ORDER BY marketplace ASC`);\n            const allProductsPromise = client.query(`SELECT DISTINCT TRIM(last_order_product) as product FROM ${baseTable} \r\n         WHERE last_order_product IS NOT NULL AND TRIM(last_order_product) <> '' \r\n         ORDER BY product ASC`);\n            const [typeSummaryResult, marketplaceSummaryResult, totalContactsResult, allMarketplacesResult, allProductsResult] = await Promise.all([\n                typeSummaryPromise,\n                marketplaceSummaryPromise,\n                totalContactsPromise,\n                allMarketplacesPromise,\n                allProductsPromise\n            ]);\n            // Process Total Contacts\n            const totalContacts = parseInt(totalContactsResult.rows[0].count, 10) || 0;\n            // Process Type Summary\n            const summaryMap = new Map();\n            const validTypes = [\n                \"Client\",\n                \"Prospect\",\n                \"Lead\"\n            ];\n            validTypes.forEach((type)=>summaryMap.set(type, 0));\n            typeSummaryResult.rows.forEach((row)=>{\n                let contactType = null;\n                if (typeof row.type === \"string\") {\n                    const normalizedType = row.type.trim();\n                    const titleCaseType = normalizedType.charAt(0).toUpperCase() + normalizedType.slice(1).toLowerCase();\n                    if (validTypes.includes(titleCaseType)) {\n                        contactType = titleCaseType;\n                    }\n                }\n                if (contactType) {\n                    summaryMap.set(contactType, (summaryMap.get(contactType) || 0) + parseInt(row.count, 10));\n                }\n            });\n            const typeSummary = Array.from(summaryMap.entries()).map(([type, count])=>({\n                    type,\n                    count\n                })).sort((a, b)=>validTypes.indexOf(a.type) - validTypes.indexOf(b.type));\n            // Process Marketplace Summary\n            const marketplaceSummary = marketplaceSummaryResult.rows.map((row)=>({\n                    marketplace: row.marketplace,\n                    count: parseInt(row.count, 10)\n                }));\n            // Process Marketplaces and Products for dropdowns\n            const allMarketplaces = allMarketplacesResult.rows.map((row)=>row.marketplace);\n            const allProducts = allProductsResult.rows.map((row)=>row.product);\n            const response = {\n                typeSummary,\n                marketplaceSummary,\n                totalContacts,\n                allMarketplaces,\n                allProducts\n            };\n            res.status(200).json(response);\n        } finally{\n            client.release();\n        }\n    } catch (error) {\n        console.error(\"Database summary query failed:\", error);\n        res.status(500).json({\n            error: \"Internal Server Error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU07b0JBQUUxQztvQkFBTTBDO2dCQUFNLElBQ3RDcUIsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1wQixXQUFXcUIsT0FBTyxDQUFDRixFQUFFaEUsSUFBSSxJQUFJNkMsV0FBV3FCLE9BQU8sQ0FBQ0QsRUFBRWpFLElBQUk7WUFFeEUsOEJBQThCO1lBQzdCLE1BQU1tRSxxQkFBK0NsQyx5QkFBeUJRLElBQUksQ0FBQ3FCLEdBQUcsQ0FBQ2QsQ0FBQUEsTUFBUTtvQkFDOUYvQyxhQUFhK0MsSUFBSS9DLFdBQVc7b0JBQzVCeUMsT0FBT0YsU0FBU1EsSUFBSU4sS0FBSyxFQUFFO2dCQUM3QjtZQUVBLGtEQUFrRDtZQUNsRCxNQUFNMEIsa0JBQTRCakMsc0JBQXNCTSxJQUFJLENBQUNxQixHQUFHLENBQUNkLENBQUFBLE1BQU9BLElBQUkvQyxXQUFXO1lBQ3ZGLE1BQU1vRSxjQUF3QmpDLGtCQUFrQkssSUFBSSxDQUFDcUIsR0FBRyxDQUFDZCxDQUFBQSxNQUFPQSxJQUFJOUMsT0FBTztZQUUzRSxNQUFNb0UsV0FBNEI7Z0JBQzlCWjtnQkFDQVM7Z0JBQ0E1QjtnQkFDQTZCO2dCQUNBQztZQUNKO1lBRUEzRSxJQUFJRyxNQUFNLENBQUMsS0FBSzBFLElBQUksQ0FBQ0Q7UUFDdkIsU0FBVTtZQUNSL0MsT0FBT2lELE9BQU87UUFDaEI7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQvRSxJQUFJRyxNQUFNLENBQUMsS0FBSzBFLElBQUksQ0FBQztZQUFFRSxPQUFPO1FBQXdCO0lBQ3hEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oaW0td2VsbG5lc3MtZGFzaGJvYXJkLy4vcGFnZXMvYXBpL2NvbnRhY3RzL3N1bW1hcnkudHM/NDdmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sIH0gZnJvbSAncGcnO1xyXG5pbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuXHJcbnR5cGUgQ29udGFjdFR5cGUgPSAnQ2xpZW50JyB8ICdQcm9zcGVjdCcgfCAnTGVhZCc7XHJcblxyXG5pbnRlcmZhY2UgVHlwZVN1bW1hcnlEYXRhIHtcclxuICB0eXBlOiBDb250YWN0VHlwZTtcclxuICBjb3VudDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTWFya2V0cGxhY2VTdW1tYXJ5RGF0YSB7XHJcbiAgbWFya2V0cGxhY2U6IHN0cmluZztcclxuICBjb3VudDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3VtbWFyeVJlc3BvbnNlIHtcclxuICAgIHR5cGVTdW1tYXJ5OiBUeXBlU3VtbWFyeURhdGFbXTtcclxuICAgIG1hcmtldHBsYWNlU3VtbWFyeTogTWFya2V0cGxhY2VTdW1tYXJ5RGF0YVtdO1xyXG4gICAgdG90YWxDb250YWN0czogbnVtYmVyO1xyXG4gICAgYWxsTWFya2V0cGxhY2VzOiBzdHJpbmdbXTtcclxuICAgIGFsbFByb2R1Y3RzOiBzdHJpbmdbXTtcclxufVxyXG5cclxuY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcclxuICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5QT1NUR1JFU19VUkwsXHJcbiAgc3NsOiB7XHJcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPFN1bW1hcnlSZXNwb25zZSB8IHsgZXJyb3I6IHN0cmluZyB9PlxyXG4pIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnXSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgeyBuYW1lLCB0eXBlLCBtYXJrZXRwbGFjZSwgcHJvZHVjdCwgc3RhcnREYXRlLCBlbmREYXRlIH0gPSByZXEucXVlcnk7XHJcblxyXG4gIGNvbnN0IHdoZXJlQ2xhdXNlczogc3RyaW5nW10gPSBbXTtcclxuICBjb25zdCBxdWVyeVBhcmFtczogKHN0cmluZyB8IG51bWJlciB8IHN0cmluZ1tdKVtdID0gW107XHJcbiAgbGV0IHBhcmFtSW5kZXggPSAxO1xyXG5cclxuICBpZiAobmFtZSAmJiB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGBuYW1lIElMSUtFICQke3BhcmFtSW5kZXgrK31gKTtcclxuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCUke25hbWV9JWApO1xyXG4gIH1cclxuICBpZiAodHlwZSAmJiB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgY29uc3QgdHlwZUFycmF5ID0gdHlwZS5zcGxpdCgnLCcpO1xyXG4gICAgICBpZiAodHlwZUFycmF5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGB0eXBlIElMSUtFIEFOWSgkJHtwYXJhbUluZGV4Kyt9Ojp0ZXh0W10pYCk7XHJcbiAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKHR5cGVBcnJheSk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgaWYgKG1hcmtldHBsYWNlICYmIHR5cGVvZiBtYXJrZXRwbGFjZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgbGV0IG1hcmtldHBsYWNlQXJyYXkgPSBtYXJrZXRwbGFjZS5zcGxpdCgnLCcpO1xyXG4gICAgICBjb25zdCBoYXNOb25lID0gbWFya2V0cGxhY2VBcnJheS5pbmNsdWRlcygnX05PTkVfJyk7XHJcbiAgICAgIG1hcmtldHBsYWNlQXJyYXkgPSBtYXJrZXRwbGFjZUFycmF5LmZpbHRlcihtID0+IG0gIT09ICdfTk9ORV8nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGNvbmRpdGlvbnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGlmIChoYXNOb25lKSB7XHJcbiAgICAgICAgICBjb25kaXRpb25zLnB1c2goYChsYXN0X21hcmtldHBsYWNlIElTIE5VTEwgT1IgVFJJTShsYXN0X21hcmtldHBsYWNlKSA9ICcnKWApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChtYXJrZXRwbGFjZUFycmF5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNvbmRpdGlvbnMucHVzaChgbGFzdF9tYXJrZXRwbGFjZSA9IEFOWSgkJHtwYXJhbUluZGV4Kyt9Ojp0ZXh0W10pYCk7XHJcbiAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKG1hcmtldHBsYWNlQXJyYXkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGAoJHtjb25kaXRpb25zLmpvaW4oJyBPUiAnKX0pYCk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgaWYgKHByb2R1Y3QgJiYgdHlwZW9mIHByb2R1Y3QgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGxldCBwcm9kdWN0QXJyYXkgPSBwcm9kdWN0LnNwbGl0KCcsJyk7XHJcbiAgICAgIGNvbnN0IGhhc05vbmUgPSBwcm9kdWN0QXJyYXkuaW5jbHVkZXMoJ19OT05FXycpO1xyXG4gICAgICBwcm9kdWN0QXJyYXkgPSBwcm9kdWN0QXJyYXkuZmlsdGVyKHAgPT4gcCAhPT0gJ19OT05FXycpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY29uZGl0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgaWYgKGhhc05vbmUpIHtcclxuICAgICAgICAgIGNvbmRpdGlvbnMucHVzaChgKGxhc3Rfb3JkZXJfcHJvZHVjdCBJUyBOVUxMIE9SIFRSSU0obGFzdF9vcmRlcl9wcm9kdWN0KSA9ICcnKWApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChwcm9kdWN0QXJyYXkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgY29uZGl0aW9ucy5wdXNoKGBsYXN0X29yZGVyX3Byb2R1Y3QgPSBBTlkoJCR7cGFyYW1JbmRleCsrfTo6dGV4dFtdKWApO1xyXG4gICAgICAgICAgcXVlcnlQYXJhbXMucHVzaChwcm9kdWN0QXJyYXkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGAoJHtjb25kaXRpb25zLmpvaW4oJyBPUiAnKX0pYCk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgaWYgKHN0YXJ0RGF0ZSAmJiB0eXBlb2Ygc3RhcnREYXRlID09PSAnc3RyaW5nJykge1xyXG4gICAgd2hlcmVDbGF1c2VzLnB1c2goYGxhc3Rfb3JkZXJfZGF0ZSA+PSAkJHtwYXJhbUluZGV4Kyt9YCk7XHJcbiAgICBxdWVyeVBhcmFtcy5wdXNoKHN0YXJ0RGF0ZSk7XHJcbiAgfVxyXG4gIGlmIChlbmREYXRlICYmIHR5cGVvZiBlbmREYXRlID09PSAnc3RyaW5nJykge1xyXG4gICAgd2hlcmVDbGF1c2VzLnB1c2goYGxhc3Rfb3JkZXJfZGF0ZSA8PSAkJHtwYXJhbUluZGV4Kyt9YCk7XHJcbiAgICBxdWVyeVBhcmFtcy5wdXNoKGVuZERhdGUpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgd2hlcmVTdHJpbmcgPSB3aGVyZUNsYXVzZXMubGVuZ3RoID4gMCA/IGBXSEVSRSAke3doZXJlQ2xhdXNlcy5qb2luKCcgQU5EICcpfWAgOiAnJztcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmFzZVRhYmxlID0gJ21hcnRfaGltZGFzaGJvYXJkLmNybV9tYWluX3RhYmxlJztcclxuXHJcbiAgICAgIC8vIFF1ZXJpZXMgZm9yIGZpbHRlcmVkIGRhdGFcclxuICAgICAgY29uc3QgdHlwZVN1bW1hcnlQcm9taXNlID0gY2xpZW50LnF1ZXJ5KFxyXG4gICAgICAgIGBTRUxFQ1QgdHlwZSwgQ09VTlQoKikgYXMgY291bnQgRlJPTSAke2Jhc2VUYWJsZX0gJHt3aGVyZVN0cmluZ30gR1JPVVAgQlkgdHlwZWAsXHJcbiAgICAgICAgcXVlcnlQYXJhbXNcclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG1hcmtldHBsYWNlV2hlcmVDbGF1c2UgPSBgJHt3aGVyZVN0cmluZyA/IGAke3doZXJlU3RyaW5nfSBBTkRgIDogJ1dIRVJFJ30gbGFzdF9tYXJrZXRwbGFjZSBJUyBOT1QgTlVMTCBBTkQgVFJJTShsYXN0X21hcmtldHBsYWNlKSA8PiAnJ2A7XHJcbiAgICAgIGNvbnN0IG1hcmtldHBsYWNlU3VtbWFyeVByb21pc2UgPSBjbGllbnQucXVlcnkoXHJcbiAgICAgICAgYFNFTEVDVCBUUklNKGxhc3RfbWFya2V0cGxhY2UpIGFzIG1hcmtldHBsYWNlLCBDT1VOVCgqKSBhcyBjb3VudCBcclxuICAgICAgICAgRlJPTSAke2Jhc2VUYWJsZX0gXHJcbiAgICAgICAgICR7bWFya2V0cGxhY2VXaGVyZUNsYXVzZX1cclxuICAgICAgICAgR1JPVVAgQlkgVFJJTShsYXN0X21hcmtldHBsYWNlKSBcclxuICAgICAgICAgT1JERVIgQlkgY291bnQgREVTQ2AsXHJcbiAgICAgICAgcXVlcnlQYXJhbXNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHRvdGFsQ29udGFjdHNQcm9taXNlID0gY2xpZW50LnF1ZXJ5KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSAke2Jhc2VUYWJsZX0gJHt3aGVyZVN0cmluZ31gLFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1zXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBRdWVyaWVzIGZvciB1bmZpbHRlcmVkIGRyb3Bkb3duIG9wdGlvbnNcclxuICAgICAgY29uc3QgYWxsTWFya2V0cGxhY2VzUHJvbWlzZSA9IGNsaWVudC5xdWVyeShcclxuICAgICAgICBgU0VMRUNUIERJU1RJTkNUIFRSSU0obGFzdF9tYXJrZXRwbGFjZSkgYXMgbWFya2V0cGxhY2UgRlJPTSAke2Jhc2VUYWJsZX0gXHJcbiAgICAgICAgIFdIRVJFIGxhc3RfbWFya2V0cGxhY2UgSVMgTk9UIE5VTEwgQU5EIFRSSU0obGFzdF9tYXJrZXRwbGFjZSkgPD4gJycgXHJcbiAgICAgICAgIE9SREVSIEJZIG1hcmtldHBsYWNlIEFTQ2BcclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFsbFByb2R1Y3RzUHJvbWlzZSA9IGNsaWVudC5xdWVyeShcclxuICAgICAgICBgU0VMRUNUIERJU1RJTkNUIFRSSU0obGFzdF9vcmRlcl9wcm9kdWN0KSBhcyBwcm9kdWN0IEZST00gJHtiYXNlVGFibGV9IFxyXG4gICAgICAgICBXSEVSRSBsYXN0X29yZGVyX3Byb2R1Y3QgSVMgTk9UIE5VTEwgQU5EIFRSSU0obGFzdF9vcmRlcl9wcm9kdWN0KSA8PiAnJyBcclxuICAgICAgICAgT1JERVIgQlkgcHJvZHVjdCBBU0NgXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBbXHJcbiAgICAgICAgICB0eXBlU3VtbWFyeVJlc3VsdCwgXHJcbiAgICAgICAgICBtYXJrZXRwbGFjZVN1bW1hcnlSZXN1bHQsXHJcbiAgICAgICAgICB0b3RhbENvbnRhY3RzUmVzdWx0LFxyXG4gICAgICAgICAgYWxsTWFya2V0cGxhY2VzUmVzdWx0LCBcclxuICAgICAgICAgIGFsbFByb2R1Y3RzUmVzdWx0XHJcbiAgICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICB0eXBlU3VtbWFyeVByb21pc2UsXHJcbiAgICAgICAgICBtYXJrZXRwbGFjZVN1bW1hcnlQcm9taXNlLFxyXG4gICAgICAgICAgdG90YWxDb250YWN0c1Byb21pc2UsXHJcbiAgICAgICAgICBhbGxNYXJrZXRwbGFjZXNQcm9taXNlLFxyXG4gICAgICAgICAgYWxsUHJvZHVjdHNQcm9taXNlXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgLy8gUHJvY2VzcyBUb3RhbCBDb250YWN0c1xyXG4gICAgICBjb25zdCB0b3RhbENvbnRhY3RzID0gcGFyc2VJbnQodG90YWxDb250YWN0c1Jlc3VsdC5yb3dzWzBdLmNvdW50LCAxMCkgfHwgMDtcclxuXHJcbiAgICAgIC8vIFByb2Nlc3MgVHlwZSBTdW1tYXJ5XHJcbiAgICAgIGNvbnN0IHN1bW1hcnlNYXAgPSBuZXcgTWFwPENvbnRhY3RUeXBlLCBudW1iZXI+KCk7XHJcbiAgICAgIGNvbnN0IHZhbGlkVHlwZXM6IENvbnRhY3RUeXBlW10gPSBbJ0NsaWVudCcsICdQcm9zcGVjdCcsICdMZWFkJ107XHJcbiAgICAgIHZhbGlkVHlwZXMuZm9yRWFjaCh0eXBlID0+IHN1bW1hcnlNYXAuc2V0KHR5cGUsIDApKTtcclxuXHJcbiAgICAgIHR5cGVTdW1tYXJ5UmVzdWx0LnJvd3MuZm9yRWFjaChyb3cgPT4ge1xyXG4gICAgICAgIGxldCBjb250YWN0VHlwZTogQ29udGFjdFR5cGUgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBpZiAodHlwZW9mIHJvdy50eXBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFR5cGUgPSByb3cudHlwZS50cmltKCk7XHJcbiAgICAgICAgICBjb25zdCB0aXRsZUNhc2VUeXBlID0gbm9ybWFsaXplZFR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBub3JtYWxpemVkVHlwZS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgaWYgKHZhbGlkVHlwZXMuaW5jbHVkZXModGl0bGVDYXNlVHlwZSBhcyBDb250YWN0VHlwZSkpIHtcclxuICAgICAgICAgICAgY29udGFjdFR5cGUgPSB0aXRsZUNhc2VUeXBlIGFzIENvbnRhY3RUeXBlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGFjdFR5cGUpIHtcclxuICAgICAgICAgICAgc3VtbWFyeU1hcC5zZXQoY29udGFjdFR5cGUsIChzdW1tYXJ5TWFwLmdldChjb250YWN0VHlwZSkgfHwgMCkgKyBwYXJzZUludChyb3cuY291bnQsIDEwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHR5cGVTdW1tYXJ5OiBUeXBlU3VtbWFyeURhdGFbXSA9IEFycmF5LmZyb20oc3VtbWFyeU1hcC5lbnRyaWVzKCkpXHJcbiAgICAgICAgLm1hcCgoW3R5cGUsIGNvdW50XSkgPT4gKHsgdHlwZSwgY291bnQgfSkpXHJcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IHZhbGlkVHlwZXMuaW5kZXhPZihhLnR5cGUpIC0gdmFsaWRUeXBlcy5pbmRleE9mKGIudHlwZSkpO1xyXG4gICAgICBcclxuICAgICAgLy8gUHJvY2VzcyBNYXJrZXRwbGFjZSBTdW1tYXJ5XHJcbiAgICAgICBjb25zdCBtYXJrZXRwbGFjZVN1bW1hcnk6IE1hcmtldHBsYWNlU3VtbWFyeURhdGFbXSA9IG1hcmtldHBsYWNlU3VtbWFyeVJlc3VsdC5yb3dzLm1hcChyb3cgPT4gKHtcclxuICAgICAgICBtYXJrZXRwbGFjZTogcm93Lm1hcmtldHBsYWNlLFxyXG4gICAgICAgIGNvdW50OiBwYXJzZUludChyb3cuY291bnQsIDEwKSxcclxuICAgICAgfSkpO1xyXG5cclxuICAgICAgLy8gUHJvY2VzcyBNYXJrZXRwbGFjZXMgYW5kIFByb2R1Y3RzIGZvciBkcm9wZG93bnNcclxuICAgICAgY29uc3QgYWxsTWFya2V0cGxhY2VzOiBzdHJpbmdbXSA9IGFsbE1hcmtldHBsYWNlc1Jlc3VsdC5yb3dzLm1hcChyb3cgPT4gcm93Lm1hcmtldHBsYWNlKTtcclxuICAgICAgY29uc3QgYWxsUHJvZHVjdHM6IHN0cmluZ1tdID0gYWxsUHJvZHVjdHNSZXN1bHQucm93cy5tYXAocm93ID0+IHJvdy5wcm9kdWN0KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlOiBTdW1tYXJ5UmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICB0eXBlU3VtbWFyeSxcclxuICAgICAgICAgIG1hcmtldHBsYWNlU3VtbWFyeSxcclxuICAgICAgICAgIHRvdGFsQ29udGFjdHMsXHJcbiAgICAgICAgICBhbGxNYXJrZXRwbGFjZXMsXHJcbiAgICAgICAgICBhbGxQcm9kdWN0c1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzcG9uc2UpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2Ugc3VtbWFyeSBxdWVyeSBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicgfSk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIlBvb2wiLCJwb29sIiwiY29ubmVjdGlvblN0cmluZyIsInByb2Nlc3MiLCJlbnYiLCJQT1NUR1JFU19VUkwiLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiZW5kIiwibmFtZSIsInR5cGUiLCJtYXJrZXRwbGFjZSIsInByb2R1Y3QiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicXVlcnkiLCJ3aGVyZUNsYXVzZXMiLCJxdWVyeVBhcmFtcyIsInBhcmFtSW5kZXgiLCJwdXNoIiwidHlwZUFycmF5Iiwic3BsaXQiLCJsZW5ndGgiLCJtYXJrZXRwbGFjZUFycmF5IiwiaGFzTm9uZSIsImluY2x1ZGVzIiwiZmlsdGVyIiwibSIsImNvbmRpdGlvbnMiLCJqb2luIiwicHJvZHVjdEFycmF5IiwicCIsIndoZXJlU3RyaW5nIiwiY2xpZW50IiwiY29ubmVjdCIsImJhc2VUYWJsZSIsInR5cGVTdW1tYXJ5UHJvbWlzZSIsIm1hcmtldHBsYWNlV2hlcmVDbGF1c2UiLCJtYXJrZXRwbGFjZVN1bW1hcnlQcm9taXNlIiwidG90YWxDb250YWN0c1Byb21pc2UiLCJhbGxNYXJrZXRwbGFjZXNQcm9taXNlIiwiYWxsUHJvZHVjdHNQcm9taXNlIiwidHlwZVN1bW1hcnlSZXN1bHQiLCJtYXJrZXRwbGFjZVN1bW1hcnlSZXN1bHQiLCJ0b3RhbENvbnRhY3RzUmVzdWx0IiwiYWxsTWFya2V0cGxhY2VzUmVzdWx0IiwiYWxsUHJvZHVjdHNSZXN1bHQiLCJQcm9taXNlIiwiYWxsIiwidG90YWxDb250YWN0cyIsInBhcnNlSW50Iiwicm93cyIsImNvdW50Iiwic3VtbWFyeU1hcCIsIk1hcCIsInZhbGlkVHlwZXMiLCJmb3JFYWNoIiwic2V0Iiwicm93IiwiY29udGFjdFR5cGUiLCJub3JtYWxpemVkVHlwZSIsInRyaW0iLCJ0aXRsZUNhc2VUeXBlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsInRvTG93ZXJDYXNlIiwiZ2V0IiwidHlwZVN1bW1hcnkiLCJBcnJheSIsImZyb20iLCJlbnRyaWVzIiwibWFwIiwic29ydCIsImEiLCJiIiwiaW5kZXhPZiIsIm1hcmtldHBsYWNlU3VtbWFyeSIsImFsbE1hcmtldHBsYWNlcyIsImFsbFByb2R1Y3RzIiwicmVzcG9uc2UiLCJqc29uIiwicmVsZWFzZSIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/contacts/summary.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts%2Fsummary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts%5Csummary.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();